<% content_for :question do %> <%= title %> <% end %>

<% form_for controller_name, :url=>{:action=>'questions', :id=>(@question_number + 1)}, :html=>{:id=>"#{controller_name}_form"} do |f| -%>
	<div class="vgutter enclose">
		<div class="grid_2">&nbsp;</div>
		<% (0...ColgateSurvey::NUMBER_OF_TOOTHPASTE_WORDS).each do |i| %>
		 	<div class="grid_4"><%= image_tag(@colgate.toothpaste_words[i].to_img) %></div>
		<% end %>
	</div>
	<br class="clear" />
  	<% form_for controller_name, :url=>{:action=>'questions', :id=>(@question_number + 1)}, :html=>{:id=> "#{controller_name}_form"} do |f| -%>
	<div class="vgutter enclose">
		<div class="grid_16" style="padding-left: 35px;">
		<% Sampling.all.shuffle.each do |sampling| %>
			<div class="grid_2 draggable" id="<%= dom_id sampling %>" title="<%= sampling.name %>" style="height: 40px;">
				<%= sampling.name %>
			</div>
		<% end %>
		</div>
	</div>
	<br class="clear" />
	<div class="vgutter enclose">
		<div class="grid_5" style="margin-left: 35px;">
			<div class="droppable luxury_words "id="droppable_1">
				<p>1</p>
			</div>
		</div>
		<div class="grid_5">
			<div class="droppable luxury_words"id="droppable_2">
				<p>2</p>
			</div>
		</div>
		<div class="grid_5">
			<div class="droppable luxury_words"id="droppable_3">
				<p>3</p>
			</div>
		</div>
	</div>
	<%= render :partial=>'navigation' %>
<% end %>
	
	
	
	
	<% content_for :javascript do %>
	<script type="text/javascript">
		function addToForm(event,ui){
			var substring_index = ui.draggable.attr('id').search(/\d+/);
			var value = ui.draggable.attr('id').substring(substring_index);
			var $curr = $(this).attr( 'id' ).replace( /droppable_/ , '' );
			var $curr_name = ui.draggable.attr('title');
			$("#<%= controller_name+'_form'%>").append('<input type="hidden" id="sampling_ids_'+ui.draggable.attr('id')+'" name="colgate[sampling_ids][]" value="'+value+'" />');
			if( $curr == 1 )
				$("#<%= controller_name+'_form'%>").append('<input type="hidden" name="colgate[sampling_one]" value="'+$curr_name+'" />');
				
			ui.draggable.addClass("selected");
			var dropped = $(this);
 			dropped.droppable( "option", "disabled", true );
			ui.draggable.bind( "drag", function(event, ui) {
				$(this).removeClass("selected");
				dropped.droppable( "option", "disabled", false );
				$('#sampling_ids_'+$(this).attr('id')).remove();
			});
		};
		$('.draggable').draggable();
		$(".droppable").droppable({
			tolerance: 'touch',
			drop: addToForm
		});
	</script>
	<% end %>
<% end %>	